<!DOCTYPE html>
<html class="h-full">
  <head>
    <title>Modern Rails App</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
     <%= favicon_link_tag "favicon-#{Rails.env}.ico" %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <%= stylesheet_link_tag :app,"data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    
    <script>
      // Dark mode initialization (before page load to prevent flash)
      if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark')
      } else {
        document.documentElement.classList.remove('dark')
      }
    </script>
     <style>
        /* Custom styles for the transition and colors */
        body {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .dark body {
            background-color: #1a202c;
            color: #e2e8f0;
        }
            #app-main {
  padding-top: var(--header-height, 4rem);  /* fallback 64px */
  padding-bottom: var(--footer-height, 8rem); /* fallback 128px */
}

    </style>
  </head>

<body 
  class="h-screen bg-gray-50 transition-colors duration-200 flex flex-col" 
  data-controller="theme layout"
>
  <!-- Fixed Header -->
  <header id="app-header" class="fixed top-0 left-0 right-0 z-50">
    <%= render 'shared/header' %>
  </header>

  <!-- Scrollable Main -->
  <main id="app-main" 
        class="flex-1 overflow-y-auto" 
        data-layout-target="main">
    <%= render 'shared/flash' %>
    <div class="py-6">
      <%= yield %>
    </div>
  </main>

  <!-- Fixed Footer -->
  <footer id="app-footer" class="fixed bottom-0 left-0 right-0 z-50" data-layout-target="footer">
    <%= render 'shared/footer' %>
  </footer>
</body>


</html>
